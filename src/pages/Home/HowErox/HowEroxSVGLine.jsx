import React, { useEffect, useRef } from "react";

const HowEroxSVGLine = ({ sectionRef }) => {
   const svgRef = useRef(null);
   useEffect(() => {
      const animateSvgOnScroll = () => {
         if (!sectionRef.current) {
            return;
         }
         const rect = sectionRef.current.getBoundingClientRect();
         let scrollRatio = (rect.top + rect.height / 2) / window.innerHeight;
         scrollRatio = Math.max(0, Math.min(scrollRatio, 1));

         const svg = svgRef.current;
         const path = svg.querySelector("path");
         const pathLength = path.getTotalLength();
         path.style.strokeDasharray = pathLength + " " + pathLength;
         path.style.strokeDashoffset = pathLength * scrollRatio;
      };

      window.addEventListener("scroll", animateSvgOnScroll);
      animateSvgOnScroll(); // Initialize the animation state based on initial scroll position

      return () => window.removeEventListener("scroll", animateSvgOnScroll);
   });

   return (
      <svg
         ref={svgRef}
         width="1091"
         height="1325"
         viewBox="0 0 1091 1325"
         fill="none"
         xmlns="http://www.w3.org/2000/svg"
         id="how-erox-svg-line"
         className="paperplane-svg"
      >
         <path
            d="M157.113 230.279C93.3171 155.955 73.6116 117.779 78.1126 73.2786C82.6136 28.7786 113.113 8.27865 149.113 2.77865C185.113 -2.72135 222.112 21.2785 234.613 63.2786C247.113 105.279 203.712 174.206 162.613 221.779C117.226 182.171 86.6133 120.779 86.6133 104.279C86.6133 87.7788 87.9984 54.7788 96.6133 42.2788C105.228 29.7788 126.613 14.2787 152.613 12.2788C178.614 10.279 208.114 36.279 216.113 61.7788C224.113 87.2786 169.613 206.779 169.613 206.779C143.915 167.953 108.613 132.278 105.113 96.7786C101.614 61.2788 122.113 33.7785 143.113 32.2786C164.114 30.7788 192.112 44.7785 197.613 63.2786C203.113 81.7788 184.667 143.639 162.613 187.779C162.613 187.779 124.112 122.778 122.113 96.7786C120.113 70.7788 138.612 48.2785 157.113 49.2786C175.613 50.2788 183.112 61.7784 185.113 73.2786C187.113 84.7788 180.08 142.754 162.613 176.279C146.119 153.217 141.385 137.9 132.613 110.779C135.613 87.7788 195.106 175.824 214.113 230.279C212.618 242.97 211.265 256.358 214.113 262.779C216.96 269.199 310.113 264.779 313.113 262.779C316.112 260.779 315.486 246.438 313.113 236.279H300.613C301.221 243.758 302.113 249.779 300.613 252.279C299.112 254.779 229.112 253.779 227.613 252.279C226.113 250.779 225.916 239.429 227.613 230.279H215.613C215.613 230.279 214.612 251.779 216.613 257.279C218.613 262.779 306.113 263.814 309.613 258.779C313.112 253.744 312.313 247.286 309.613 240.279C309.613 240.279 303.612 236.779 303.113 240.279C302.613 243.779 307.113 252.279 304.613 255.279C302.112 258.279 231.613 255.279 231.613 255.279C226.482 255.806 222.113 255.779 219.613 252.279C217.113 248.779 219.47 243.711 222.113 237.279C224.755 230.847 258.613 244.279 258.613 239.279C258.613 234.279 258.353 209.607 258.613 190.279C252.953 196.32 244.613 204.279 242.613 204.279C240.613 204.279 234.112 202.279 235.113 196.779C236.113 191.279 246.559 183.248 255.113 176.279L265.113 165.779C277.778 177.33 295.613 194.779 295.113 196.779C294.612 198.779 289.112 206.279 287.113 205.279C285.113 204.279 276.514 196.92 270.613 188.779V239.279C270.613 239.279 262.112 243.779 261.113 239.279C260.113 234.779 260.785 210.287 261.113 192.779V186.279C253.97 192.551 245.613 200.279 242.613 200.279C239.612 200.279 239.52 200.279 238.113 196.779C236.705 193.279 250.684 181.577 259.613 173.779L265.113 168.279L292.113 196.779L287.113 202.779L273.613 188.779L270.613 184.779H268.113C266.976 206.553 269.613 233.279 268.113 236.279C266.612 239.279 264.113 237.279 263.613 236.279C263.112 235.279 262.41 206.477 263.613 190.279V182.779C263.613 182.779 244.612 197.779 242.613 196.779C240.613 195.779 242.112 194.779 244.613 191.279C247.113 187.779 252.112 184.779 256.113 182.779C260.113 180.779 262.612 174.279 264.613 173.279C266.613 172.279 280.229 186.761 289.113 195.779C288.368 197.843 287.113 199.279 286.113 198.279C285.113 197.279 269.5 183.221 268.5 178.5C267.5 173.779 293.666 199.5 352.5 214.5C411.334 229.5 442.541 226.958 567.5 209.5C638.951 199.518 749.167 218.721 778 229.5C806.833 240.279 882 262.779 869 337.779C856 412.779 855.5 522.279 869 536.279C882.5 550.279 975 544.279 978.5 543.779C982 543.279 984.5 530.279 978.5 528.779C972.5 527.279 964 524.279 965.5 516.779C967 509.279 969.5 494.779 978.5 491.779C987.5 488.779 986.5 491.279 998 491.779C1009.5 492.279 1014 490.779 1024 476.779C1033.3 463.766 1036.11 404.528 1032.45 379.779M987 329.989C992.097 330.606 995.949 331.367 998 332.279C1011.5 338.279 1026.5 354.279 1031.5 374.779C1031.85 376.224 1032.17 377.902 1032.45 379.779M987 329.989C958.553 326.546 891.329 327.614 882 332.279C871 337.779 871.5 511.779 874 520.279C876.5 528.779 927.5 528.779 949 528.779C970.5 528.779 1005 530.779 1015.5 528.779C1026 526.779 1016.87 448.85 1015.5 425.779C1014.13 402.708 988.5 364.279 978.5 358.279C968.5 352.279 902 345.779 895 358.279C888 370.779 895 413.779 902.5 417.779C910 421.779 987 414.279 991.5 417.779C996 421.279 993.5 458.779 978.5 461.279C963.5 463.779 910 450.279 902.5 455.779C895 461.279 898.5 498.779 902.5 503.779C906.5 508.779 955.5 506.779 965.5 503.779C975.5 500.779 995 497.279 998 496.279C1001 495.279 1001 496.279 1005 492.279C1009 488.279 1006 474.779 1008 472.279C1010 469.779 1039 466.779 1041.5 472.279C1044 477.779 1044 488.279 1045 492.279C1046 496.279 1049.5 496.279 1052.5 496.279C1055.5 496.279 1067.5 486.779 1071 488.779C1074.5 490.779 1089 515.779 1088 518.279C1087 520.779 1073.5 527.779 1072 530.279C1070.5 532.779 1070 535.279 1072 538.779C1074 542.279 1088 548.779 1088 551.279C1088 553.779 1073.5 580.779 1071 580.779C1068.5 580.779 1054.5 574.279 1052.5 573.279C1050.5 572.279 1046.5 572.779 1045 576.779C1043.5 580.779 1044 595.779 1042 597.279C1040 598.779 1009 600.279 1007.5 597.279C1006 594.279 1005.5 581.279 1005 576.779C1004.5 572.279 1001 570.779 998 573.279C995 575.779 983 581.779 979.5 580.779C976 579.779 962 554.779 962 551.279C962 547.779 965.07 546.827 968 545.779C968 545.779 975.5 572.779 981 574.279C986.5 575.779 993.5 572.279 996 566.779C998.5 561.279 979.5 548.779 983.5 545.779C987.5 542.779 991 538.779 987.5 532.279C984 525.779 981 519.779 981 513.779C981 507.779 980.5 497.279 984.5 495.279C988.5 493.279 998.5 503.779 1003.5 499.779C1008.5 495.779 1009.5 478.779 1012 476.779C1014.5 474.779 1027 471.779 1035 475.279C1043 478.779 1036.5 492.779 1041.5 497.279C1046.5 501.779 1058.72 506.529 1062.5 505.779C1066.28 505.029 1066 499.779 1069.5 499.779C1073 499.779 1079 510.279 1077.5 516.779C1076 523.279 1063.5 528.279 1061 530.279C1058.5 532.279 1061 536.779 1061 539.779C1061 542.779 1061 543.279 1061.5 546.279C1062 549.279 1072.86 548.462 1075.5 551.279C1078.14 554.096 1072.5 570.779 1068.5 570.779C1064.5 570.779 1047.5 563.779 1041.5 566.779C1035.5 569.779 1038.5 588.279 1034 591.779C1029.5 595.279 1016.5 594.279 1015 591.279C1013.5 588.279 1016 580.279 1013.5 575.779C1011 571.279 1008.94 565.194 1005 565.279C1001.06 565.363 992.861 557.052 996 551.279C999.139 545.505 999.5 538.279 997 534.279C994.5 530.279 990 530.779 991 519.779C992 508.779 1001.5 510.779 1006 503.779C1010.5 496.779 1016.5 489.779 1022 492.279C1027.5 494.779 1026 490.279 1034 498.279C1042 506.279 1054 505.279 1057 510.779C1060 516.279 1057.5 519.779 1055.5 522.279C1053.5 524.779 1052 537.779 1048.5 543.779C1045 549.779 1058 547.279 1057 554.279C1056 561.279 1033.5 554.779 1029.5 563.779C1025.5 572.779 1033.5 577.779 1027.5 583.279C1021.5 588.779 1213.5 783.057 779 655.779C344.5 528.5 409.645 667.448 177.5 648.5C162.541 623.63 125.62 623.609 117 625.5C108.38 627.391 62.0698 641.796 62 688C60.1025 720.748 69.4045 728.903 87 742.5C105.209 757.585 114.693 759.039 131 756C176.386 749.419 190.5 725 194.5 706.5C198.5 688 176.5 661.5 161 650C145.5 638.5 139 639.5 122 639.5C105 639.5 78 659 75.5 679C73 699 78.5 714.5 89.5 728.5C100.5 742.5 112 741.5 126 743.5C140 745.5 156.112 735.751 168.5 722C175.461 715.134 178.704 709.661 180 689C169.032 679.392 153.5 665 148 668C142.5 671 127.5 690.5 127.5 690.5C121.833 685.306 116.5 680 110 675.5C103.5 671 98 677.5 100.5 683C103 688.5 120.5 702.5 126 705.5C131.5 708.5 151.5 686.5 154 679C156.5 671.5 153 668.336 147 672.5C141 676.664 133 689 133 689C131.482 692.79 131.5 695.5 126 694.5C120.5 693.5 113 682.5 110 681C107 679.5 106 682 107.5 685C109 688 117.5 695.5 123.5 699C129.5 702.5 139.5 680 148 680C156.5 680 168.236 731.514 165.5 769L56.5 782.5C35.8375 782.642 24.2102 806.246 3.5 835L46.5 880.5C60.218 867.563 64.5 856 84 852.5C103.5 849 123 856 161 848.5C199 841 245.5 805 248 797C250.5 789 241 782.5 233 782.5C225 782.5 195 802 177.5 809C160 816 133.559 811.238 123.5 812C113.441 812.762 161 800 168.5 789.5C176 779 169.5 772 169.5 772C169.5 772 107 789.5 89.5 786.5C72 783.5 67.5 785 56.5 794.5C45.5 804 21.5 823 18 832C14.5 841 34 865 41 865C48 865 70.5 844.5 70.5 844.5L122 841C180.449 836.374 234.5 803.5 237.5 800C240.5 796.5 237 790.5 231 793C225 795.5 178 818.5 178 818.5C154.766 828.353 139.449 830.616 112 834.5C92.4738 835.086 68.5 829 62 836C55.5 843 55.5 848.5 46.5 852.5C37.5 856.5 33 849.5 31.5 841C30 832.5 32.5 826 39.5 818.5C46.5 811 58.3937 807.225 70.5 800C70.5 800 147 783.5 154 782.5C161 781.5 162 789.5 154 793C146 796.5 112 809 112 809C112 809 61.5 816 66 822.5C70.5 829 84.5 818.5 98 822.5C111.5 826.5 252.113 867.5 301.5 924.5C350.887 981.5 428.982 1092.1 572 1081.5C684.107 1073.19 733.345 1056.75 797 1083.5C779.136 1092.05 769.297 1097.24 755.5 1115C767.758 1135.33 777.24 1142.97 793.5 1157.5L805 1137.5L832.5 1159.5V1219H863L872.5 1157.5L894 1137.5L901 1157.5L945 1119.5L904.5 1078L896 1098L852.5 1122L869 1108V1067.5L883.5 1064.5L888.5 1052L850.5 1015L810.5 1059.5L831 1064.5V1105.5L805 1098L802.5 1081C787.124 1091.65 766.5 1104 764 1114C761.5 1124 779.451 1134.1 793.5 1150L797 1128.5L835.5 1146.5L839.5 1172L836.5 1193.5L837.5 1212.5L860 1214.5L864 1186V1166L875 1143.5L891.5 1132L902.5 1127V1147.5L937.5 1121L906 1086.5L904 1105.5L856.5 1126L861 1108.5L859.5 1080.5L861 1057.5L881 1057L850 1026L820 1055.5L840 1056V1110.5L846.5 1128.5L830 1115.5L797 1106.5L796 1091C796 1091 768 1111.5 768 1114.5C768 1117.5 786.378 1133.55 795 1148L809 1128.5L837 1147.5L846.5 1130L863 1126L840.5 1169L851.5 1121L841.5 1109.5L911.5 1189.5L981 1186V1174H966L964.5 1166L1003.5 1164.5L1005 1172L989 1174V1186C1008.69 1186.61 1018.55 1191.38 1034.5 1205.5L1045 1197.5C1043.46 1194.55 1043.5 1190 1047 1186C1050.5 1182 1057.5 1183.5 1061 1187.5C1064.5 1191.5 1064 1195.5 1061 1199C1058 1202.5 1054.6 1202.46 1050 1202L1040.5 1210.5C1052.34 1227.47 1055.38 1238.49 1056.5 1260C1049.32 1292.23 1038.73 1305.32 1012 1320L950.5 1316.5L1001.5 1322.5L911.5 1320L948 1316.5L940 1307.5L877 1304.5L930 1300L922 1287L851.5 1282.5L918.5 1278.5L915 1260L835.5 1255L915 1250.5L918.5 1232L855 1228L922 1222.5L930 1209L877 1205.5L936 1202L950.5 1193.5L962 1189.5L1017.5 1207C1027.51 1216.04 1032.9 1221.31 1039.5 1233.5C1043.65 1246.62 1043.89 1253.95 1041.5 1267C1036.43 1283.77 1034.5 1288.5 1021 1298C1007.5 1307.5 1004.42 1309.62 992.5 1312C975.121 1314 966.326 1311.56 951.5 1303.5C940.742 1293.66 936.028 1287.66 931.5 1275.5C926.538 1262.64 926.649 1253.61 928.5 1236.5C935.276 1223.4 938.259 1221.94 946.5 1214.5C952.735 1208.87 956.901 1205.49 964 1202C988.361 1198.35 1008.5 1206.5 1013 1210.5C1017.5 1214.5 1012.5 1222 1007 1220C1001.5 1218 990 1212.5 978.5 1214.5C967 1216.5 947 1225.5 944 1243.5C941 1261.5 942 1267 949.5 1280.5C957 1294 984 1299 986 1300C988 1301 989.335 1303.23 986 1303.5C982.665 1303.77 962.516 1299.98 953.5 1292C942.747 1284.56 937.386 1279.24 935.5 1256.5C934.915 1242.44 937.779 1234.67 946.5 1221C954.455 1212.74 959.126 1209.16 968 1205.5C981.88 1202.34 989.619 1202.83 1003.5 1205.5L1021 1218L992.5 1243.5C987.425 1241.91 984.5 1241.5 979.5 1243.5C974.5 1245.5 971.5 1252 973 1259C974.5 1266 980.5 1267 983.5 1267C986.5 1267 994 1264 996 1260C998 1256 998.489 1251.17 996 1250.5C994.842 1250.19 1015.5 1232.5 1026 1223.5L1022 1220L989 1247L980.5 1249L976.5 1257.5L1019.5 1226M987 329.989C987 329.989 981.5 368.779 988.5 376.779C995.5 384.779 1015.32 382.322 1032.45 379.779M987 329.989C1002.54 344.53 1026 367.779 1024 371.279C1022 374.779 1001.5 376.779 995.5 371.279C989.5 365.779 995.5 343.279 995.5 343.279"
            stroke="white"
            strokeWidth="4"
            strokeDashoffset="0"
         />
      </svg>
   );
};

export default HowEroxSVGLine;
